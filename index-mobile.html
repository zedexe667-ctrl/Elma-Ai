<!DOCTYPE html>
<html lang="fa" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elma Ai</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome (Ø¨Ù‡ÛŒÙ†Ù‡ Ùˆ Ø³Ø±ÛŒØ¹â€ŒØªØ±) -->
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
    <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
        onload="this.onload=null;this.rel='stylesheet'">
    <noscript>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    </noscript>

    <link
        href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;500;600&family=Estedad:wght@400;500;600&display=swap"
        rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/sahel-font@v3.4.0/dist/font-face.css" rel="stylesheet"
        type="text/css" />
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/shabnam-font@v5.0.1/dist/font-face.css" rel="stylesheet"
        type="text/css" />
    <link rel="icon" type="image/png" href="Assets/img/logo/Logo2.png" />
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700&display=swap');

        :root {
            --app-font: "Vazirmatn, sans-serif";
        }

        * {
            font-family: var(--app-font);
        }

        .dark {
            --bg-primary: linear-gradient(135deg, #161616 0%, #161616 50%, #161616 100%);
            --bg-secondary: rgba(34, 34, 34, 0.8);
            --bg-tertiary: #1f1f1f99;
            --text-primary: #9c9c9c;
            --text-secondary: #cacaca;
            --border-color: rgba(56, 56, 56, 0.342);
            --accent-color: linear-gradient(135deg, #e115f3 0%, #ff00aa 100%);
            --chat-bg: #1b1b1bf2;
        }

        .light {
            --bg-primary: linear-gradient(135deg, #ffeef8 0%, #ffe0f0 50%, #d6f3ff 100%);
            --bg-secondary: rgba(255, 240, 245, 0.9);
            --bg-tertiary: rgba(255, 228, 240, 0.8);
            --text-primary: #2d1b69;
            --text-secondary: #8b5a8c;
            --border-color: rgba(56, 56, 56, 0.342);
            --accent-color: linear-gradient(135deg, #ff6b9d 0%, #ff8fab 100%);
            --chat-bg: rgba(255, 255, 255, 0.95);
        }

        body {
            background: var(--bg-primary);
            background-attachment: fixed;
        }

        .theme-bg-primary {
            background: var(--bg-primary);
        }

        .theme-bg-secondary {
            background: var(--bg-secondary);
        }

        .theme-bg-tertiary {
            background: var(--bg-tertiary);
        }

        .theme-text-primary {
            color: var(--text-primary);
        }

        .theme-text-secondary {
            color: var(--text-secondary);
        }

        .theme-border {
            border-color: var(--border-color);
        }

        .theme-accent {
            background: var(--accent-color);
        }

        .theme-chat-bg {
            background: var(--chat-bg);
        }

        .glass-effect {
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-color);
            box-shadow: 0 8px 32px rgba(216, 216, 216, 0);
        }

        .glow-effect {
            box-shadow: 0 0 20px var(--glow-color);
        }

        .slide-in-right {
            animation: slideInRight 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .slide-out-right {
            animation: slideOutRight 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideOutRight {
            from {
                transform: translateX(0);
                opacity: 1;
            }

            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }

        .bounce-in {
            animation: bounceIn 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes bounceIn {
            0% {
                transform: scale(0.3);
                opacity: 0;
            }

            50% {
                transform: scale(1.05);
            }

            70% {
                transform: scale(0.9);
            }

            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .message-bubble {
            max-width: 80%;
            word-wrap: break-word;
            border-radius: 20px;
            position: relative;
        }

        .user-message {
            background: linear-gradient(135deg, #667eea7c 0%, #764ba271 100%);
            color: white;
            border-bottom-left-radius: 5px;
        }

        .ai-message {
            background: linear-gradient(135deg, #3052eb6c 0%, #641fa56e 100%);
            color: #ffffff;
            border-bottom-right-radius: 5px;
        }

        .typing-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ff6b9c00 0%, #c4456900 100%);
            animation: typing 1.4s infinite ease-in-out;
        }

        .typing-indicator:nth-child(1) {
            animation-delay: -0.32s;
        }

        .typing-indicator:nth-child(2) {
            animation-delay: -0.16s;
        }

        @keyframes typing {

            0%,
            80%,
            100% {
                transform: scale(0);
                opacity: 0.5;
            }

            40% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .heart-float {
            animation: heartFloat 3s ease-in-out infinite;
        }

        @keyframes heartFloat {

            0%,
            100% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        .pulse-glow {
            animation: pulseGlow 2s ease-in-out infinite alternate;
        }

        @keyframes pulseGlow {
            from {
                box-shadow: 0 0 20px var(--glow-color);
            }

            to {
                box-shadow: 0 0 30px var(--glow-color);
            }
        }

        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }

        .grid-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 1rem;
        }

        .hover-lift {
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .hover-lift:hover {
            box-shadow: 0 10px 25px var(--glow-color);
        }

        .gradient-text {
            background: linear-gradient(135deg, #ff6b9d 0%, #c44569 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .chat-menu-container {
            position: relative;
        }

        .chat-dropdown-menu {
            pointer-events: auto;
        }

        .chat-menu-open .chat-dropdown-menu {
            display: block !important;
        }

        @media (max-width: 768px) {
            .grid-gallery {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }
        }

        /* Gallery lock + blur */
        .gallery-item {
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            transition: transform 0.25s ease, filter 0.25s ease;
        }

        /* blur for locked images */
        .gallery-item.locked img {
            filter: blur(8px) grayscale(10%);
            transform: scale(1.04);
            user-select: none;
            pointer-events: none;
            /* prevent native image click on locked state */
        }

        /* lock overlay */
        .gallery-item .lock-overlay {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            pointer-events: auto;
            /* allow click on overlay */
            background: linear-gradient(180deg, rgba(0, 0, 0, 0.0) 0%, rgba(0, 0, 0, 0.45) 100%);
            color: #fff;
            font-weight: 600;
            gap: .6rem;
            flex-direction: column;
            transition: opacity .2s ease;
        }

        .gallery-item .lock-badge {
            background: rgba(0, 0, 0, 0.6);
            padding: .6rem .8rem;
            border-radius: 12px;
            display: flex;
            gap: .5rem;
            align-items: center;
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.4);
        }

        /* small text under lock */
        .gallery-item .lock-text {
            font-size: 0.85rem;
            opacity: 0.95;
        }

        /* hover effect for unlocked */
        .gallery-item:not(.locked):hover img {
            transform: scale(1.03);
            filter: none;
        }

        #messageInput {
            overflow-y: hidden;
            resize: none;
        }

        .image-wrapper {
            position: relative;
            display: inline-block;
            overflow: hidden;
        }

        .image-wrapper img {
            width: 100%;
            border-radius: 20px;
            filter: blur(12px);
            opacity: 0.8;
            transition: all 0.8s ease;
        }

        .image-wrapper.loaded img {
            filter: blur(0);
            opacity: 1;
        }

        .image-loader {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border: 4px solid rgba(255, 255, 255, 0);
            border-top-color: #ff6b9c00;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            from {
                transform: translate(-50%, -50%) rotate(0deg);
            }

            to {
                transform: translate(-50%, -50%) rotate(360deg);
            }
        }

        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(253, 253, 253, 0.15);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #f7f7f7, #bbbbbb);
            border-radius: 10px;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #f7f7f7, #d3d3d3);
        }

        .dark {
            --glow-color: rgba(63, 193, 253, 0.6);
            /* Ø³Ø¨Ø²Ø¢Ø¨ÛŒ Ù†Ø¦ÙˆÙ†ÛŒ Ø¨Ø±Ø§ÛŒ Ø¯Ø§Ø±Ú© */
        }

        .light {
            --glow-color: rgba(255, 107, 157, 0.6);
            /* ØµÙˆØ±ØªÛŒ Ù†Ø¦ÙˆÙ†ÛŒ Ø¨Ø±Ø§ÛŒ Ø±ÙˆØ´Ù† */
        }

        /* ğŸ¨ ÙˆØ§Ú©Ù†Ø´â€ŒÚ¯Ø±Ø§ÛŒÛŒ Ø¨Ø±Ø§ÛŒ Ø¨Ù†Ø± Ø§Ø±ØªÙ‚Ø§ */
        @media (max-width: 768px) {
            .upgrade-banner {
                flex-direction: column !important;
                align-items: flex-start !important;
                text-align: right !important;
                gap: 1rem !important;
                padding: 1rem !important;
            }

            .upgrade-banner img {
                width: 48px !important;
                height: 48px !important;
            }

            .upgrade-banner h3 {
                font-size: 1rem !important;
            }

            .upgrade-banner p {
                font-size: 0.8rem !important;
            }

            .upgrade-banner .flex.items-center.gap-2 {
                width: 100%;
                justify-content: space-between;
            }

            .upgrade-banner button {
                flex: 1;
                font-size: 0.85rem !important;
            }

            .upgrade-banner button[aria-label="Close"] {
                flex: 0 0 auto;
            }
        }

        .custom-max-w {
            max-width: 90rem;
            /* Ù‡Ø± Ø¹Ø¯Ø¯ Ø¯Ù„Ø®ÙˆØ§Ù‡ px/rem */
        }
    </style>
</head>

<body class="light theme-text-primary transition-all duration-500 romantic-bg">
    <!-- Sidebar -->
    <div id="sidebar"
        class="fixed right-0 top-0 h-full w-80 glass-effect transform translate-x-full md:translate-x-0 transition-all duration-500 z-50">
        <div class="flex flex-col h-full">
            <!-- Header -->
            <div class="p-6 theme-border border-b">
                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-3">
                        <div
                            class="w-12 h-12 rounded-full flex items-center justify-center overflow-hidden border-2 border-pink-500">
                            <img src="Assets/img/logo/Logo.png" alt="Profile" class="w-full h-full object-cover">
                        </div>
                        <div>
                            <h2 class="text-xl font-bold gradient-text">Elma Ai</h2>
                            <p class="text-sm theme-text-secondary">Ù‡Ù…ÛŒØ´Ù‡ Ú©Ù†Ø§Ø±ØªÙ… ğŸ’•</p>
                        </div>
                    </div>
                    <div class="flex items-center gap-2">
                        <button id="closeSidebar" class="p-3 rounded-full glass-effect hover-lift md:hidden">
                            <i class="fas fa-times theme-text-primary"></i>
                        </button>
                    </div>
                </div>
            </div>
            <!-- Menu Items -->
            <div class="flex-1 overflow-y-auto scrollbar-hide">
                <div class="p-4 space-y-3">
                    <button id="newChatBtn"
                        class="w-full flex items-center gap-2 p-2 rounded-xl glass-effect hover-lift transition-all duration-300">
                        <div class="w-8 h-8 rounded-full theme-accent flex items-center justify-center">
                            <i class="fas fa-plus text-white text-sm"></i>
                        </div>
                        <span class="theme-text-primary font-medium text-sm">Ú†Øª Ø¬Ø¯ÛŒØ¯</span>
                    </button>
                    <button id="galleryBtn"
                        class="w-full flex items-center gap-2 p-2 rounded-2xl glass-effect hover-lift transition-all duration-300">
                        <div class="w-8 h-8 rounded-full theme-accent flex items-center justify-center">
                            <i class="fas fa-images text-white"></i>
                        </div>
                        <span class="theme-text-primary font-medium">Ú¯Ø§Ù„Ø±ÛŒ Ø¹Ú©Ø³â€ŒÙ‡Ø§</span>
                    </button>
                    <button id="rechargeBtn"
                        class="w-full flex items-center gap-2 p-2 mt-2 rounded-2xl glass-effect hover-lift transition-all duration-300"
                        title="Ù‡Ø± Ø¨Ø§Ø± Û²Ûµ Ú†Øª â€” ÙÙ‚Ø· Û³ Ø¨Ø§Ø±">
                        <div class="w-8 h-8 rounded-full theme-accent flex items-center justify-center">
                            <i class="fas fa-bolt text-white"></i>
                        </div>
                        <div class="text-right flex-1">
                            <div id="rechargeLabel" class="theme-text-primary font-medium">Ø¯Ø±ÛŒØ§ÙØª Û²Ûµ Ú†Øª</div>
                            <div id="rechargeSub" class="text-xs theme-text-secondary">Ø¨Ø§Ù‚ÛŒ: <span
                                    id="rechargeLeft">3</span>/3</div>
                        </div>
                        <div class="flex items-center">
                            <span id="rechargeTimer" class="text-sm theme-text-secondary hidden">16:59:59</span>
                        </div>
                    </button>
                    <!-- Confirmation modal (centered & improved) -->
                    <div id="rechargeModal"
                        class="fixed inset-0 bg-black/60 backdrop-blur-sm hidden z-[999] flex items-center justify-center">
                        <div
                            class="glass-effect rounded-3xl max-w-md w-full mx-4 p-8 text-center bounce-in shadow-2xl border border-pink-400/30">
                            <div
                                class="w-16 h-16 mx-auto mb-4 rounded-full theme-accent flex items-center justify-center heart-float glow-effect">
                                <i class="fas fa-bolt text-white text-2xl"></i>
                            </div>
                            <h3 class="text-2xl font-bold gradient-text mb-3">Ø´Ø§Ø±Ú˜ Û²Ûµ Ú†Øª ğŸ’•</h3>
                            <p id="rechargeMsg" class="theme-text-secondary mb-6 leading-relaxed text-sm sm:text-base">
                                Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù†ÛŒ Ù…ÛŒâ€ŒØ®ÙˆØ§ÛŒ Û²Ûµ ØªØ§ Ú†Øª Ø¬Ø¯ÛŒØ¯ Ø¨Ú¯ÛŒØ±ÛŒ Ù†Ø§Ø²Ù…ØŸ ğŸ˜˜
                            </p>
                            <div class="flex flex-col sm:flex-row gap-3">
                                <button id="confirmRecharge"
                                    class="flex-1 py-3 theme-accent text-white rounded-2xl hover-lift transition-all duration-300 font-medium">
                                    Ø¨Ø²Ù† Ø¨Ø²Ù†! Ø´Ø§Ø±Ú˜ Ú©Ù† âš¡
                                </button>
                                <button id="cancelRecharge"
                                    class="flex-1 py-3 glass-effect theme-text-primary rounded-2xl hover-lift transition-all duration-300 font-medium">
                                    Ù†Ù‡ØŒ Ø¨ÛŒâ€ŒØ®ÛŒØ§Ù„ ğŸ˜…
                                </button>
                            </div>
                        </div>
                    </div>
                    <!-- ğŸ’• Success Popup Modal (Elma style) -->
                    <div id="rechargeSuccessModal"
                        class="fixed inset-0 bg-black/40 backdrop-blur-sm hidden z-[1500] flex items-center justify-center">
                        <div
                            class="glass-effect rounded-3xl w-full max-w-sm mx-4 p-6 text-center animate-[fadeIn_0.5s_ease,heartFloat_3s_ease-in-out_infinite] glow-effect">
                            <div
                                class="w-16 h-16 mx-auto mb-3 rounded-full theme-accent flex items-center justify-center heart-float glow-effect">
                                <i class="fas fa-heart text-white text-2xl"></i>
                            </div>
                            <h3 class="text-xl font-bold gradient-text mb-2">Ø´Ø§Ø±Ú˜ Ø´Ø¯ÛŒ Ø¹Ø´Ù‚Ù… ğŸ’•</h3>
                            <p id="rechargeSuccessMsg" class="theme-text-secondary text-sm leading-relaxed"></p>
                        </div>
                    </div>
                </div>
                <!-- Chat History -->
                <div class="p-2">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-sm font-semibold theme-text-secondary flex items-center gap-2">
                            <i class="fas fa-history"></i>
                            Ú†Øªâ€ŒÙ‡Ø§ÛŒ Ù‚Ø¨Ù„ÛŒ
                        </h3>
                        <button id="archiveHistoryBtn" class="p-2 rounded-full glass-effect hover-lift">
                            <i class="fas fa-archive theme-text-primary text-sm"></i>
                        </button>
                    </div>
                    <div id="chatHistory" class="space-y-2">
                        <!-- Chat history items will be populated here -->
                    </div>
                </div>
            </div>
            <!-- Ù‚Ø±Ø§Ø± Ø¨Ø¯Ù‡ Ø¨Ø§Ù„Ø§ÛŒ Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ú©Ø§Ø±Ø¨Ø± -->
            <div id="upgradeTopBtn" role="button" tabindex="0" aria-haspopup="dialog" aria-controls="premiumModal"
                class="group sm:bg-token-main-surface-primary text-token-text-primary hover:bg-token-main-surface-secondary relative z-10 flex w-full items-center justify-between rounded-t-2xl py-3 ps-4 pe-4 text-xs border-token-border-default border border-[.5px] p-2 focus-visible:ring-token-text-tertiary focus-visible:ring-2 focus-visible:ring-offset-1 focus-visible:ring-offset-transparent focus-visible:outline-hidden motion-safe:transition-colors motion-safe:duration-150">
                <span class="flex items-center gap-2">
                    <span>
                        <!-- svg... (Ù‡Ù…ÙˆÙ† svg Ú©Ù‡ Ø¯Ø§Ø¯ÛŒ) -->
                        <svg width="20" height="20" viewBox="0 0 300.005 300.005" fill="currentColor"
                            xmlns="http://www.w3.org/2000/svg" class="icon-sm text-[#5856D6] dark:text-[#DCDBF6]">
                            <g>
                                <g>
                                    <g>
                                        <path d="M150,0C67.159,0,0.002,67.162,0.002,150S67.159,300.005,150,300.005c82.843,0,150.003-67.165,150.003-150.005
                S232.843,0,150,0z M232.17,222.642h-0.006c0,8.139-6.601,14.74-14.742,14.74h-9.114v-63.759h-43.054v63.757H81.085
                c-8.139,0-14.74-6.601-14.74-14.74v-76.471c7.374-0.576,13.985-3.911,18.757-9.008c5.257,5.615,12.732,9.127,21.014,9.127
                c8.282,0,15.756-3.512,21.014-9.127c5.257,5.615,12.735,9.127,21.016,9.127s15.756-3.512,21.014-9.127
                c5.257,5.615,12.732,9.127,21.014,9.127c8.282,0,15.754-3.512,21.014-9.127c5.25,5.607,12.714,9.117,20.982,9.127V222.642z
                 M232.195,130.727c-7.296,0-13.233-5.937-13.233-13.233c0-4.298-3.483-7.781-7.781-7.781c-4.298,0-7.781,3.483-7.781,7.781
                c0,7.296-5.934,13.233-13.233,13.233s-13.233-5.937-13.233-13.233c0-4.298-3.483-7.781-7.781-7.781
                c-4.298,0-7.781,3.483-7.781,7.781c0,7.296-5.937,13.233-13.233,13.233s-13.235-5.937-13.235-13.233
                c0-4.298-3.483-7.781-7.781-7.781c-4.298,0-7.781,3.483-7.781,7.781c0,7.296-5.937,13.233-13.233,13.233
                c-7.296,0-13.233-5.937-13.233-13.233c0-4.298-3.483-7.781-7.781-7.781c-4.298,0-7.781,3.483-7.781,7.781
                c0,7.296-5.937,13.233-13.235,13.233c-6.515,0-11.944-4.733-13.033-10.94l40.168-54.438h116.521l37.587,53.766
                C244.53,125.651,238.943,130.727,232.195,130.727z" />
                                        <rect x="89.039" y="174.157" width="47.619" height="33.263" />
                                    </g>
                                </g>
                            </g>
                        </svg>
                    </span>
                    <span>Ø·Ø±Ø­ Ø®ÙˆØ¯ Ø±Ø§ Ø§Ø±ØªÙ‚Ø§ Ø¯Ù‡ÛŒØ¯</span>
                </span>
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg"
                    data-rtl-flip="" class="icon-xs text-token-text-primary" style="transform: scaleX(-1);">
                    <path
                        d="M8.36328 3.36261C8.59049 3.13571 8.94123 3.10739 9.19922 3.27765L9.30371 3.36261L13.4707 7.5296L13.5557 7.6341C13.7259 7.89208 13.6976 8.24282 13.4707 8.47003L9.30371 12.637C9.04407 12.8967 8.62299 12.8966 8.36328 12.637C8.10358 12.3773 8.10358 11.9563 8.36328 11.6966L11.3936 8.66535H3C2.63284 8.66535 2.33514 8.36743 2.33496 8.00031C2.33496 7.63304 2.63273 7.33527 3 7.33527H11.3945L8.36328 4.30402L8.27832 4.19953C8.10759 3.94137 8.13592 3.58997 8.36328 3.36261Z">
                    </path>
                </svg>
            </div>
            <!-- User Profile -->
            <div id="userProfile" class="p-2 theme-border border-t glass-effect">
                <div class="flex items-center gap-2">
                    <button id="ProfileBtn"
                        class="flex items-center gap-2 flex-1 hover-lift transition-all duration-300 rounded-2xl p-2">
                        <div class="w-8 h-8 rounded-full overflow-hidden border-2 border-pink-500">
                            <img id="ProfileImage" src="Assets/img/logo/Logo2.png" alt="Profile"
                                class="w-full h-full object-cover">
                        </div>
                        <div class="flex-1 text-right">
                            <div id="userName" class="font-medium theme-text-primary">Ú©Ø§Ø±Ø¨Ø± Ù…Ù‡Ù…Ø§Ù†</div>
                            <div id="userType" class="text-sm theme-text-secondary">Ø­Ø³Ø§Ø¨ Ø±Ø§ÛŒÚ¯Ø§Ù† ğŸ’•</div>
                        </div>
                    </button>
                    <button id="logoutBtn" class="p-2 rounded-full glass-effect hover-lift">
                        <i class="fas fa-sign-out-alt theme-text-primary"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!-- Main Content -->
    <div id="mainContent" class="md:mr-80 mr-0 transition-all duration-500">
        <div class="fixed top-0 left-0 w-full z-60 theme-border">
            <div class="flex items-center justify-between p-2 max-w-4xl mx-auto">
                <div class="flex items-center gap-3">
                    <button id="openSidebar" class="p-3 rounded-full glass-effect hover-lift md:hidden">
                        <i class="fas fa-chart-bar theme-text-primary"></i>
                    </button>
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 rounded-full overflow-hidden border-2 border-pink-400">
                            <img src="Assets/img/Elma/Elma103.png" alt="Elma" class="w-full h-full object-cover"
                                onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                            <div class="w-full h-full theme-accent flex items-center justify-center"
                                style="display: none;">
                                <i class="fas fa-heart text-white"></i>
                            </div>
                        </div>
                        <div class="relative inline-block text-l" id="elmaMenuContainer">
                            <button id="elmaNameBtn"
                                class="text-lg font-semibold gradient-text flex items-center gap-2 p-1 hover:opacity-90"
                                aria-haspopup="true" aria-expanded="false">
                                Elma ğŸ’•
                                <i class="fas fa-caret-down theme-text-primary text-sm"></i>
                            </button>
                            <div id="elmaAccountMenu"
                                class="absolute right-0 mt-2 w-48 glass-effect rounded-2xl shadow-lg hidden z-20 overflow-hidden">
                                <div class="p-3">
                                    <div class="text-sm theme-text-secondary mb-2">Ø§Ù†ØªØ®Ø§Ø¨ Ù†ÙˆØ¹ Ø­Ø³Ø§Ø¨</div>
                                    <button data-account="free"
                                        class="w-full flex items-center justify-between p-3 rounded-lg hover:theme-bg-tertiary transition-all mb-1"
                                        id="accountFreeBtn">
                                        <div class="text-right">
                                            <div class="font-medium theme-text-primary">Elma 2.5 flash</div>
                                            <div class="text-xs theme-text-secondary">Ø³Ø·Ø­ Ù¾Ø§ÛŒÙ‡</div>
                                        </div>
                                        <input type="radio" name="accountType" value="free" id="radioFree"
                                            class="pointer-events-none" />
                                    </button>
                                    <button data-account="plus"
                                        class="w-full flex items-center justify-between p-3 rounded-lg hover:theme-bg-tertiary transition-all"
                                        id="accountPlusBtn">
                                        <div class="text-right">
                                            <div class="font-medium theme-text-primary">Elma pro</div>
                                            <div class="text-xs theme-text-secondary">Ø§Ù…Ú©Ø§Ù†Ø§Øª Ù¾Ø±ÛŒÙ…ÛŒÙˆÙ…</div>
                                        </div>
                                        <input type="radio" name="accountType" value="plus" id="radioPlus"
                                            class="pointer-events-none" />
                                    </button>
                                    <div class="flex items-center gap-2">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Chat Area -->
            <div id="chatArea" class="h-screen pb-32 overflow-y-auto scrollbar-hide">
                <div id="messagesContainer"
                    class="max-w-4xl p-6 md:p-20 space-y-4 text-center sm:mr-[100px] md:mr-[300px] lg:mr-[500px]">
                    <!-- Welcome Message -->
                    <div class="text-center py-12 fade-in">
                        <div
                            class="w-24 h-24 mx-auto mb-6 rounded-full overflow-hidden border-4 border-pink-400 heart-float glow-effect">
                            <img src="Assets/img/Elma/Elma103.png" alt="Elma" class="w-full h-full object-cover"
                                onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                            <div class="w-full h-full theme-accent flex items-center justify-center"
                                style="display: none;">
                                <i class="fas fa-heart text-white text-3xl"></i>
                            </div>
                        </div>
                        <h2 class="text-3xl font-bold gradient-text mb-3">Ø³Ù„Ø§Ù… Ø¹Ø´Ù‚Ù…! Ù…Ù† Ø§Ù„Ù…Ø§ Ù‡Ø³ØªÙ… ğŸ’–</h2>
                        <p class="theme-text-secondary text-2xl">Ø¯ÙˆØ³Øª Ø¯Ø®ØªØ± Ù…Ø¬Ø§Ø²ÛŒ ØªÙˆ Ù‡Ø³ØªÙ…</p>
                    </div>
                </div>
            </div>
            <!-- Upgrade Banner -->
            <div class="fixed bottom-20 right-0 left-0 md:right-80 px-4 z-40">
                <div
                    class="upgrade-banner flex items-center justify-between glass-effect border theme-border rounded-2xl py-3 px-4 mb-3 text-sm flex-wrap gap-3 theme-bg-tertiary theme-text-primary max-w-3xl mx-auto shadow-lg">
                    <div class="flex items-center gap-3">
                        <img src="Assets/img/logo/Logo2.png" alt="Plus" class="w-10 h-10 object-contain" />
                        <div>
                            <h3 class="font-bold text-base">Ù…ÛŒâ€ŒØ®ÙˆØ§ÛŒ Ø§Ø² Elma Pro Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØŸ ğŸ’</h3>
                            <p class="text-xs theme-text-secondary">
                                Ø¨Ø§ Ù†Ø³Ø®Ù‡ Ù¾Ø±ÛŒÙ…ÛŒÙˆÙ… Ú†Øª Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯ Ùˆ Ù¾Ø§Ø³Ø® Ø³Ø±ÛŒØ¹â€ŒØªØ± Ø¨Ú¯ÛŒØ± ğŸ˜
                            </p>
                        </div>
                    </div>
                    <div class="flex items-center gap-2">
                        <button
                            class="px-4 py-2 rounded-xl bg-gradient-to-r from-yellow-400 to-orange-500 text-white hover:scale-105 transition-all duration-300 text-sm"
                            onclick="loadPage('pro.html')">
                            Ø´Ø±ÙˆØ¹ Ú©Ù†ÛŒØ¯
                        </button>
                        <button class="p-2 rounded-lg hover:bg-pink-200/20 transition-all duration-300"
                            onclick="this.parentElement.parentElement.remove()" aria-label="Close">
                            <i class="fas fa-times theme-text-secondary"></i>
                        </button>
                    </div>
                </div>
            </div>
            <div
                class="fixed bottom-0 right-0 left-0 md:right-80 px-4 py-3 bg-transparent backdrop-blur-xl border-t theme-border transition-all duration-300">
                <div class="max-w-3xl mx-auto">
                    <!-- Quick Actions -->
                    <div id="quickActionsMenu" class="mb-2 hidden">
                        <div class="flex flex-wrap gap-2 justify-center text-sm">
                            <button id="quickPhoto"
                                class="px-3 py-1.5 rounded-full glass-effect hover-lift flex items-center gap-2 theme-text-primary">
                                <i class="fas fa-camera text-pink-400"></i>
                                Ø¹Ú©Ø³ Ø¨Ø¯Ù‡
                                <span id="photoCount" class="text-xs theme-text-secondary">(3)</span>
                                <!-- âœ… Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯ -->
                            </button>
                            <button id="quickChat"
                                class="px-3 py-1.5 rounded-full glass-effect hover-lift flex items-center gap-2 theme-text-primary">
                                <i class="fas fa-comments text-purple-400"></i>
                                Ú†Øª Ú©Ù†ÛŒÙ…
                                <span id="chatCount" class="text-xs theme-text-secondary">(3)</span> <!-- âœ… Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯ -->
                            </button>
                            <button id="quickGame"
                                class="px-3 py-1.5 rounded-full glass-effect hover-lift flex items-center gap-2 theme-text-primary">
                                <i class="fas fa-gamepad text-green-400"></i>
                            </button>
                            <button id="upgradePro"
                                class="px-3 py-1.5 rounded-full bg-gradient-to-r from-yellow-400 to-orange-500 text-white hover-lift flex items-center gap-2 hidden">
                                <i class="fas fa-crown"></i>
                                Ù¾Ø±Ùˆ Ø¨Ø®Ø±
                            </button>
                        </div>
                    </div>
                    <!-- Chat Box -->
                    <div
                        class="flex items-center gap-1 sm:gap-2 rounded-xl px-2 sm:px-3 py-1.5 sm:py-2 glass-effect border">
                        <!-- Plus Button (Attach) -->
                        <button id="imageBtn"
                            class="p-2.5 rounded-xl hover:bg-pink-100/40 dark:hover:bg-pink-900/40 text-pink-500 transition-all duration-200">
                            <i class="fas fa-plus"></i>
                        </button>
                        <!-- Text Input -->
                        <textarea id="messageInput" rows="1" placeholder="Ù¾ÛŒØ§Ù…Øª Ø±Ùˆ Ø¨Ù†ÙˆÛŒØ³..."
                            class="flex-1 bg-transparent resize-none px-2 py-2 text-sm md:text-base focus:outline-none theme-text-primary placeholder-pink-400"></textarea>
                        <!-- Magic Button -->
                        <button id="quickActionsBtn"
                            class="p-2.5 rounded-xl hover:bg-pink-100/60 dark:hover:bg-pink-900/50 text-pink-600 dark:text-pink-300 transition-all duration-200 shadow-sm">
                            <i class="fas fa-wand-magic-sparkles"></i>
                        </button>
                        <!-- Send Button -->
                        <button id="sendBtn"
                            class="p-2.5 rounded-xl bg-gradient-to-r from-pink-500 to-fuchsia-600 text-white hover:scale-105 active:scale-95 transition-all duration-200 shadow-md">
                            <i class="fas fa-arrow-up"></i>
                        </button>
                    </div>
                </div>
            </div>
            <!-- Toast Notification -->
            <div id="toast" class="fixed bottom-6 left-1/2 -translate-x-1/2 px-4 py-2 rounded-2xl 
             bg-white/90 dark:bg-gray-900/90 backdrop-blur-md text-pink-600 dark:text-pink-300
             shadow-lg border border-pink-300/30 hidden z-[9999] transition-all duration-300">
                ğŸš« Ø¯Ø± Ø­Ø§Ù„ Ø­Ø§Ø¶Ø± Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¹Ú©Ø³ ÛŒØ§ ÙØ§ÛŒÙ„ÛŒ Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯.
            </div>
            <!-- Gallery Modal -->
            <div id="galleryModal"
                class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
                <div class="glass-effect rounded-3xl w-full max-w-4xl max-h-[90vh] overflow-hidden bounce-in">
                    <div class="flex items-center justify-between p-6 theme-border border-b">
                        <h3 class="text-2xl font-bold gradient-text flex items-center gap-3">
                            <i class="fas fa-images"></i>
                            Ú¯Ø§Ù„Ø±ÛŒ Ø¹Ú©Ø³â€ŒÙ‡Ø§ÛŒ Ø¹Ø§Ø´Ù‚Ø§Ù†Ù‡
                        </h3>
                        <button id="closeGallery" class="p-3 rounded-full glass-effect hover-lift">
                            <i class="fas fa-times theme-text-primary"></i>
                        </button>
                    </div>
                    <div class="p-6 overflow-y-auto max-h-[70vh]">
                        <div id="galleryGrid" class="grid-gallery">
                            <!-- Gallery items will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
            <!-- Registration Modal (FULL: Email/Password + Google + Password-setup for new Google users) -->
            <div id="registrationModal"
                class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
                <div class="glass-effect rounded-3xl w-full max-w-3xl bounce-in overflow-hidden">
                    <button id="closeModal"
                        class="absolute top-4 right-4 text-white text-xl font-bold hover:text-red-400 transition-all">
                        &times;
                    </button>
                    <div class="flex flex-col md:flex-row items-center justify-between p-8 gap-6">
                        <!-- ğŸ–¼ Ø³Ù…Øª Ú†Ù¾: ØªØµÙˆÛŒØ± -->
                        <div class="flex-1 flex justify-center">
                            <img src="Assets/img/Elma/Elma107.png" alt="Elma"
                                class="w-64 max-w-full rounded-2xl shadow-lg transition-transform duration-300 hover:scale-105" />
                        </div>
                        <!-- ğŸ“ Ø³Ù…Øª Ø±Ø§Ø³Øª -->
                        <div class="flex-1 text-center">
                            <h3 class="text-2xl font-bold gradient-text mb-4">Ø¨Ù‡ Ø¯Ù†ÛŒØ§ÛŒ Ø§Ù„Ù…Ø§ Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒ ğŸ’«</h3>
                            <!-- ØªØ¨â€ŒÙ‡Ø§ -->
                            <div class="flex justify-center mb-4 border-b border-pink-400/30">
                                <button id="loginTab"
                                    class="flex-1 py-2 text-sm font-semibold theme-text-primary border-b-2 border-transparent hover:border-pink-400 transition-all">
                                    ÙˆØ±ÙˆØ¯
                                </button>
                                <button id="registerTab"
                                    class="flex-1 py-2 text-sm font-semibold theme-text-secondary border-b-2 border-transparent hover:border-pink-400 transition-all">
                                    Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…
                                </button>
                            </div>
                            <!-- ÙØ±Ù… ÙˆØ±ÙˆØ¯ -->
                            <div id="loginForm" class="space-y-4">
                                <div class="text-right">
                                    <input type="email" id="loginEmail" placeholder="Ø§ÛŒÙ…ÛŒÙ„..."
                                        class="w-full p-3 rounded-2xl glass-effect theme-text-primary focus:outline-none"
                                        autocomplete="email" />
                                    <div id="loginEmailError" class="text-xs text-red-400 mt-1 text-right"></div>
                                </div>
                                <div class="text-right">
                                    <input type="password" id="loginPassword" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±..."
                                        class="w-full p-3 rounded-2xl glass-effect theme-text-primary focus:outline-none"
                                        autocomplete="current-password" />
                                    <div id="loginPassError" class="text-xs text-red-400 mt-1 text-right"></div>
                                </div>
                                <button id="loginBtn"
                                    class="w-full py-3 bg-gradient-to-r from-blue-500 to-indigo-500 text-white rounded-2xl font-semibold hover:scale-105 transition-all duration-300">
                                    ÙˆØ±ÙˆØ¯
                                </button>
                                <button id="googleLoginBtn"
                                    class="w-full py-3 glass-effect rounded-2xl font-semibold flex items-center justify-center gap-2 hover-lift transition-all">
                                    <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg"
                                        class="w-5 h-5" />
                                    ÙˆØ±ÙˆØ¯ / Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø¨Ø§ Ú¯ÙˆÚ¯Ù„
                                </button>
                            </div>
                            <!-- ÙØ±Ù… Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… -->
                            <div id="registerForm" class="space-y-4 hidden">
                                <div class="text-right">
                                    <input type="email" id="regEmail" placeholder="Ø§ÛŒÙ…ÛŒÙ„..."
                                        class="w-full p-3 rounded-2xl glass-effect theme-text-primary focus:outline-none"
                                        autocomplete="email" />
                                    <div id="regEmailError" class="text-xs text-red-400 mt-1 text-right"></div>
                                </div>
                                <div class="text-right">
                                    <input type="password" id="regPassword" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± (Ø­Ø¯Ø§Ù‚Ù„ 8 Ø­Ø±Ù)..."
                                        class="w-full p-3 rounded-2xl glass-effect theme-text-primary focus:outline-none" />
                                    <div id="passwordStrength" class="text-xs mt-1 text-right"></div>
                                </div>
                                <div class="text-right">
                                    <input type="password" id="regPasswordRepeat" placeholder="ØªÚ©Ø±Ø§Ø± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±..."
                                        class="w-full p-3 rounded-2xl glass-effect theme-text-primary focus:outline-none" />
                                    <div id="passwordMatchMsg" class="text-xs text-red-400 mt-1 text-right"></div>
                                </div>
                                <button id="registerBtn"
                                    class="w-full py-3 bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-2xl font-semibold hover:scale-105 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed"
                                    disabled>
                                    Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…
                                </button>
                                <button id="googleRegisterBtn"
                                    class="w-full py-3 glass-effect rounded-2xl font-semibold flex items-center justify-center gap-2 hover-lift transition-all">
                                    <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg"
                                        class="w-5 h-5" />
                                    Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø¨Ø§ Ú¯ÙˆÚ¯Ù„
                                </button>
                            </div>
                            <!-- Ù¾Ù†Ù„ Ø³Ø§Ø®Øª Ù¾Ø³ÙˆØ±Ø¯ Ø¨Ø¹Ø¯ Ø§Ø² Ø«Ø¨Øª/ÙˆØ±ÙˆØ¯ Ø¨Ø§ Ú¯ÙˆÚ¯Ù„ (Ø¨Ø±Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø¬Ø¯ÛŒØ¯ Ú¯ÙˆÚ¯Ù„) -->
                            <div id="setPasswordPanel" class="space-y-4 hidden">
                                <h4 class="text-lg font-semibold theme-text-primary mb-2">Ø¨Ø±Ø§ÛŒ Ø§Ù…Ù†ÛŒØª Ø¨ÛŒØ´ØªØ±ØŒ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±
                                    Ø¨Ø³Ø§Ø² ğŸ’ª</h4>
                                <input type="password" id="googlePassword" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¬Ø¯ÛŒØ¯ (Ø­Ø¯Ø§Ù‚Ù„ 8 Ø­Ø±Ù)..."
                                    class="w-full p-3 rounded-2xl glass-effect theme-text-primary focus:outline-none" />
                                <div id="googlePwdStrength" class="text-xs mt-1 text-right"></div>
                                <input type="password" id="googlePasswordRepeat" placeholder="ØªÚ©Ø±Ø§Ø± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±..."
                                    class="w-full p-3 rounded-2xl glass-effect theme-text-primary focus:outline-none" />
                                <div id="googlePwdMatch" class="text-xs text-red-400 mt-1 text-right"></div>
                                <button id="saveGooglePassword"
                                    class="w-full py-3 bg-gradient-to-r from-yellow-400 to-orange-500 text-white rounded-2xl font-semibold hover:scale-105 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed"
                                    disabled>
                                    Ø°Ø®ÛŒØ±Ù‡ Ø±Ù…Ø² Ùˆ Ø±ÙØªÙ† Ø¨Ù‡ Ù¾Ù†Ù„
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Premium Modal -->
            <div id="premiumModal"
                class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
                <div class="glass-effect rounded-3xl w-full max-w-lg bounce-in">
                    <div class="p-8">
                        <div class="text-center mb-6">
                            <div
                                class="w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-r from-yellow-400 to-orange-500 flex items-center justify-center heart-float glow-effect">
                                <i class="fas fa-crown text-white text-2xl"></i>
                            </div>
                            <h3 class="text-2xl font-bold gradient-text mb-2">Ø­Ø³Ø§Ø¨ Ù¾Ø±ÛŒÙ…ÛŒÙˆÙ…</h3>
                            <p class="theme-text-secondary">ØªØ¬Ø±Ø¨Ù‡ Ú©Ø§Ù…Ù„ Ø¯ÙˆØ³Øª Ø¯Ø®ØªØ± Ù…Ø¬Ø§Ø²ÛŒ Ø±Ùˆ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´</p>
                        </div>
                        <div class="space-y-3">
                            <h4 class="text-center theme-text-primary font-semibold mb-2">Ø§Ù†ØªØ®Ø§Ø¨ Ø§Ø´ØªØ±Ø§Ú©:</h4>
                            <button onclick="handlePremiumPurchase(3)"
                                class="premiumPlan w-full py-4 glass-effect rounded-2xl hover:bg-pink-500 hover:bg-opacity-20 transition-all duration-300 font-medium text-lg flex items-center justify-between px-4">
                                <span><i class="fas fa-calendar-alt text-pink-400 mr-2"></i> Ø­Ø³Ø§Ø¨ Û³ Ù…Ø§Ù‡Ù‡</span>
                                <span class="theme-text-secondary text-sm">ÛµÛµÛ°,Û°Û°Û° ØªÙˆÙ…Ø§Ù†</span>
                            </button>
                            <button onclick="handlePremiumPurchase(6)"
                                class="premiumPlan w-full py-4 glass-effect rounded-2xl hover:bg-pink-500 hover:bg-opacity-20 transition-all duration-300 font-medium text-lg flex items-center justify-between px-4">
                                <span><i class="fas fa-calendar text-purple-400 mr-2"></i> Ø­Ø³Ø§Ø¨ Û¶ Ù…Ø§Ù‡Ù‡</span>
                                <span class="theme-text-secondary text-sm">Û±,Û³Û²Û°,Û°Û°Û° ØªÙˆÙ…Ø§Ù†</span>
                            </button>
                            <button onclick="handlePremiumPurchase(12)"
                                class="premiumPlan w-full py-4 glass-effect rounded-2xl hover:bg-pink-500 hover:bg-opacity-20 transition-all duration-300 font-medium text-lg flex items-center justify-between px-4">
                                <span><i class="fas fa-crown text-yellow-400 mr-2"></i> Ø­Ø³Ø§Ø¨ Û±Û² Ù…Ø§Ù‡Ù‡</span>
                                <span class="theme-text-secondary text-sm">Û²,Û²Û°Û°,Û°Û°Û° ØªÙˆÙ…Ø§Ù†</span>
                            </button>
                            <button id="closePremium"
                                class="w-full py-3 theme-text-secondary hover:theme-text-primary transition-all duration-300">
                                Ø¨Ø¹Ø¯Ø§Ù‹
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Delete Confirmation Modal -->
            <div id="deleteModal"
                class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
                <div class="glass-effect rounded-3xl w-full max-w-md bounce-in">
                    <div class="p-8">
                        <div class="text-center mb-6">
                            <div
                                class="w-16 h-16 mx-auto mb-4 rounded-full bg-red-500 flex items-center justify-center">
                                <i class="fas fa-trash text-white text-2xl"></i>
                            </div>
                            <h3 class="text-2xl font-bold text-red-500 mb-2">Ø­Ø°Ù Ú†Øª ğŸ’”</h3>
                            <p class="theme-text-secondary">ÙˆØ§Ù‚Ø¹Ø§Ù‹ Ù…ÛŒâ€ŒØ®ÙˆØ§ÛŒ Ø§ÛŒÙ† Ú†Øª Ø¹Ø§Ø´Ù‚Ø§Ù†Ù‡ Ø±Ùˆ Ø­Ø°Ù Ú©Ù†ÛŒØŸ</p>
                            <p class="theme-text-secondary text-sm mt-2">Ø§ÛŒÙ† Ø¹Ù…Ù„ Ù‚Ø§Ø¨Ù„ Ø¨Ø§Ø²Ú¯Ø´Øª Ù†ÛŒØ³Øª!</p>
                        </div>
                        <div class="flex gap-3">
                            <button id="confirmDelete"
                                class="flex-1 py-3 bg-red-500 hover:bg-red-600 text-white rounded-2xl hover-lift transition-all duration-300 font-medium">
                                Ø¨Ù„Ù‡ØŒ Ø­Ø°Ù Ú©Ù†
                            </button>
                            <button id="cancelDelete"
                                class="flex-1 py-3 glass-effect theme-text-primary rounded-2xl hover-lift transition-all duration-300 font-medium">
                                Ù„ØºÙˆ
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Archive Success Modal -->
            <div id="archiveModal"
                class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
                <div class="glass-effect rounded-3xl w-full max-w-md bounce-in">
                    <div class="p-8 text-center">
                        <div class="w-16 h-16 mx-auto mb-4 rounded-full bg-blue-500 flex items-center justify-center">
                            <i class="fas fa-archive text-white text-2xl"></i>
                        </div>
                        <h3 class="text-2xl font-bold gradient-text mb-2">Ú†Øª Ø¢Ø±Ø´ÛŒÙˆ Ø´Ø¯! ğŸ“¦</h3>
                        <p class="theme-text-secondary mb-6">Ú†Øª ØªÙˆ Ø¨Ø®Ø´ Ø¢Ø±Ø´ÛŒÙˆ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯ Ùˆ Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒ Ø¨Ø¹Ø¯Ø§Ù‹ Ø¨Ù‡Ø´ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¯Ø§Ø´ØªÙ‡
                            Ø¨Ø§Ø´ÛŒ
                        </p>
                        <button id="closeArchive"
                            class="w-full py-3 theme-accent text-white rounded-2xl hover-lift transition-all duration-300 font-medium">
                            Ø¨Ø§Ø´Ù‡
                        </button>
                    </div>
                </div>
            </div>
            <!-- Report Success Modal -->
            <div id="reportModal"
                class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
                <div class="glass-effect rounded-3xl w-full max-w-md bounce-in">
                    <div class="p-8 text-center">
                        <div class="w-16 h-16 mx-auto mb-4 rounded-full bg-orange-500 flex items-center justify-center">
                            <i class="fas fa-flag text-white text-2xl"></i>
                        </div>
                        <h3 class="text-2xl font-bold gradient-text mb-2">Ú¯Ø²Ø§Ø±Ø´ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯! ğŸš©</h3>
                        <p class="theme-text-secondary mb-6">Ù…Ù…Ù†ÙˆÙ† Ú©Ù‡ Ø¨Ù‡ Ù…Ø§ Ú©Ù…Ú© Ù…ÛŒâ€ŒÚ©Ù†ÛŒ ØªØ§ Ø³Ø±ÙˆÛŒØ³ Ø¨Ù‡ØªØ±ÛŒ Ø§Ø±Ø§Ø¦Ù‡ Ø¨Ø¯ÛŒÙ…. Ú¯Ø²Ø§Ø±Ø´Øª
                            Ø¨Ø±Ø±Ø³ÛŒ
                            Ù…ÛŒØ´Ù‡</p>
                        <button id="closeReport"
                            class="w-full py-3 theme-accent text-white rounded-2xl hover-lift transition-all duration-300 font-medium">
                            Ø¨Ø§Ø´Ù‡
                        </button>
                    </div>
                </div>
            </div>
            <!-- Rename Chat Modal -->
            <div id="renameModal"
                class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
                <div class="glass-effect rounded-3xl w-full max-w-md bounce-in">
                    <div class="p-8">
                        <div class="text-center mb-6">
                            <div
                                class="w-16 h-16 mx-auto mb-4 rounded-full bg-blue-500 flex items-center justify-center">
                                <i class="fas fa-edit text-white text-2xl"></i>
                            </div>
                            <h3 class="text-2xl font-bold gradient-text mb-2">ØªØºÛŒÛŒØ± Ù†Ø§Ù… Ú†Øª ğŸ“</h3>
                            <p class="theme-text-secondary">Ø§Ø³Ù… Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ú†ØªØª Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†</p>
                        </div>
                        <form id="renameForm" class="space-y-4">
                            <input type="text" id="newChatName" placeholder="Ø§Ø³Ù… Ø¬Ø¯ÛŒØ¯ Ú†Øª..."
                                class="w-full p-4 rounded-2xl glass-effect theme-text-primary focus:outline-none focus:glow-effect transition-all duration-300">
                            <div class="flex gap-3">
                                <button type="submit"
                                    class="flex-1 py-3 theme-accent text-white rounded-2xl hover-lift transition-all duration-300 font-medium">
                                    Ø°Ø®ÛŒØ±Ù‡
                                </button>
                                <button type="button" id="cancelRename"
                                    class="flex-1 py-3 glass-effect theme-text-primary rounded-2xl hover-lift transition-all duration-300 font-medium">
                                    Ù„ØºÙˆ
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <!-- Archive List Modal -->
            <div id="archiveListModal"
                class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
                <div class="glass-effect rounded-3xl w-full max-w-2xl max-h-[90vh] overflow-hidden bounce-in">
                    <div class="flex items-center justify-between p-6 theme-border border-b">
                        <h3 class="text-2xl font-bold gradient-text flex items-center gap-3">
                            <i class="fas fa-archive"></i>
                            Ú†Øªâ€ŒÙ‡Ø§ÛŒ Ø¢Ø±Ø´ÛŒÙˆ Ø´Ø¯Ù‡
                        </h3>
                        <button id="closeArchiveList" class="p-3 rounded-full glass-effect hover-lift">
                            <i class="fas fa-times theme-text-primary"></i>
                        </button>
                    </div>
                    <div class="p-6 overflow-y-auto max-h-[70vh]">
                        <div id="archivedChats" class="space-y-3">
                            <!-- Archived chats will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
            <!-- Settings Modal -->
            <div id="settingsModal"
                class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
                <div class="glass-effect rounded-3xl w-full max-w-2xl max-h-[90vh] overflow-hidden bounce-in">
                    <div class="flex items-center justify-between p-6 theme-border border-b">
                        <h3 class="text-2xl font-bold gradient-text flex items-center gap-3">
                            <i class="fas fa-cog"></i>
                            ØªÙ†Ø¸ÛŒÙ…Ø§Øª
                        </h3>
                        <button id="closeSettings" class="p-3 rounded-full glass-effect hover-lift">
                            <i class="fas fa-times theme-text-primary"></i>
                        </button>
                    </div>
                    <!-- Settings Tabs -->
                    <div class="flex theme-border border-b">
                        <button id="generalTab"
                            class="flex-1 py-4 px-6 text-center theme-accent text-white font-medium transition-all duration-300">
                            <i class="fas fa-sliders-h ml-2"></i>
                            Ú˜Ù†Ø±Ø§Ù„
                        </button>
                        <button id="accountTab"
                            class="flex-1 py-4 px-6 text-center theme-text-secondary hover:theme-text-primary font-medium transition-all duration-300">
                            <i class="fas fa-user-cog ml-2"></i>
                            Ø§Ú©Ø§Ù†Øª
                        </button>
                        <button id="memoryTab"
                            class="flex-1 py-4 px-6 text-center theme-text-secondary hover:theme-text-primary font-medium transition-all duration-300">
                            <i class="fas fa-brain ml-2"></i>
                            Ø­Ø§ÙØ¸Ù‡
                        </button>
                        <button id="themeTab"
                            class="flex-1 py-4 px-6 text-center theme-text-secondary hover:theme-text-primary font-medium transition-all duration-300">
                            <i class="fas fa-paint-brush ml-2"></i>
                            Ø§Ø³ØªØ§ÛŒÙ„
                        </button>
                    </div>
                    <div class="p-6 overflow-y-auto max-h-[60vh]">
                        <!-- General Settings -->
                        <div id="generalSettings" class="space-y-6">
                            <!-- Theme Toggle -->
                            <div class="glass-effect rounded-2xl p-4">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center gap-3">
                                        <i class="fas fa-palette text-purple-400"></i>
                                        <div>
                                            <div class="theme-text-primary font-medium">ØªØºÛŒÛŒØ± ØªÙ…</div>
                                            <div class="theme-text-secondary text-sm">ØªÙ… Ø±ÙˆØ´Ù† ÛŒØ§ ØªØ§Ø±ÛŒÚ©</div>
                                        </div>
                                    </div>
                                    <button id="themeToggleSettings"
                                        class="p-3 rounded-full glass-effect hover-lift pulse-glow">
                                        <i class="fas fa-moon theme-text-primary"></i>
                                    </button>
                                </div>
                            </div>
                            <!-- Language Toggle -->
                            <div class="glass-effect rounded-2xl p-4">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center gap-3">
                                        <i class="fas fa-language text-blue-400"></i>
                                        <div>
                                            <div class="theme-text-primary font-medium">ØªØºÛŒÛŒØ± Ø²Ø¨Ø§Ù†</div>
                                            <div class="theme-text-secondary text-sm">ÙØ§Ø±Ø³ÛŒ ÛŒØ§ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ</div>
                                        </div>
                                    </div>
                                    <select id="languageSelect"
                                        class="p-3 rounded-2xl glass-effect theme-text-primary focus:outline-none focus:glow-effect transition-all duration-300">
                                        <option value="fa">ÙØ§Ø±Ø³ÛŒ</option>
                                        <option value="en">English</option>
                                    </select>
                                </div>
                            </div>
                            <!-- Delete All Chats -->
                            <div class="glass-effect rounded-2xl p-4 border-2 border-red-500 border-opacity-30">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center gap-3">
                                        <i class="fas fa-trash text-red-400"></i>
                                        <div>
                                            <div class="theme-text-primary font-medium">Ø­Ø°Ù ØªÙ…Ø§Ù… Ú†Øªâ€ŒÙ‡Ø§</div>
                                            <div class="theme-text-secondary text-sm">ØªÙ…Ø§Ù… Ú†Øªâ€ŒÙ‡Ø§ Ù¾Ø§Ú© Ø®ÙˆØ§Ù‡Ù†Ø¯ Ø´Ø¯</div>
                                        </div>
                                    </div>
                                    <button id="deleteAllChats"
                                        class="px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-2xl hover-lift transition-all duration-300 font-medium">
                                        Ø­Ø°Ù Ù‡Ù…Ù‡
                                    </button>
                                </div>
                            </div>
                        </div>
                        <!-- Account Settings -->
                        <div id="accountSettings" class="space-y-6 hidden">
                            <!-- User Email -->
                            <div class="glass-effect rounded-2xl p-4 border border-pink-400/40">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center gap-3">
                                        <i data-lucide="mail" class="w-5 h-5 text-pink-400"></i>
                                        <div>
                                            <div class="theme-text-primary font-medium">Ø§ÛŒÙ…ÛŒÙ„ Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ</div>
                                            <div id="userEmailDisplay" class="theme-text-secondary text-sm select-text">
                                                Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</div>
                                        </div>
                                    </div>
                                    <button id="goChangeEmail"
                                        class="px-3 py-1 bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-xl hover-lift transition-all duration-300 text-sm flex items-center gap-1"
                                        onclick="openChangeEmailLogin()">
                                        <i data-lucide='edit-3' class="w-4 h-4"></i>
                                        ØªØºÛŒÛŒØ± Ø§ÛŒÙ…ÛŒÙ„
                                    </button>
                                </div>
                            </div>
                            <!-- Delete Account -->
                            <div class="glass-effect rounded-2xl p-4 border-2 border-red-500 border-opacity-50">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center gap-3">
                                        <i class="fas fa-user-times text-red-400"></i>
                                        <div>
                                            <div class="theme-text-primary font-medium">Ø­Ø°Ù Ø§Ú©Ø§Ù†Øª</div>
                                            <div class="theme-text-secondary text-sm">Ø§Ú©Ø§Ù†Øª Ø´Ù…Ø§ Ø¨Ø±Ø§ÛŒ Ù‡Ù…ÛŒØ´Ù‡ Ø­Ø°Ù Ø®ÙˆØ§Ù‡Ø¯ Ø´Ø¯
                                            </div>
                                        </div>
                                    </div>
                                    <button id="deleteAccount"
                                        class="px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-2xl hover-lift transition-all duration-300 font-medium">
                                        Ø­Ø°Ù Ø§Ú©Ø§Ù†Øª
                                    </button>
                                </div>
                            </div>
                            <!-- Set / Change Password -->
                            <div class="glass-effect rounded-2xl p-4 border border-yellow-400/40">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center gap-3">
                                        <i class="fas fa-lock text-yellow-400"></i>
                                        <div>
                                            <div class="theme-text-primary font-medium">Ø±Ù…Ø² ÙˆØ±ÙˆØ¯ Ø¨Ø§ Ø§ÛŒÙ…ÛŒÙ„</div>
                                            <div class="theme-text-secondary text-sm">
                                                Ù…Ø®ØµÙˆØµ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†ÛŒ Ú©Ù‡ Ø¨Ø§ Ú¯ÙˆÚ¯Ù„ ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯ ÛŒØ§ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡Ù†Ø¯ Ø±Ù…Ø² Ø®ÙˆØ¯ Ø±Ø§ ØªØºÛŒÛŒØ±
                                                Ø¯Ù‡Ù†Ø¯.
                                            </div>
                                        </div>
                                    </div>
                                    <button id="openPasswordPanel"
                                        class="px-4 py-2 bg-yellow-400 hover:bg-yellow-500 text-white rounded-2xl hover-lift transition-all duration-300 font-medium">
                                        Ø«Ø¨Øª / ØªØºÛŒÛŒØ± Ø±Ù…Ø²
                                    </button>
                                </div>
                            </div>
                            <!-- ÙØ±Ù… Ø³Ø§Ø®Øª ÛŒØ§ ØªØºÛŒÛŒØ± Ø±Ù…Ø² (Ø¯Ø± Ø§Ø¨ØªØ¯Ø§ Ù…Ø®ÙÛŒ) -->
                            <div id="passwordPanel" class="hidden mt-4 space-y-3">
                                <input type="password" id="newPassword" placeholder="Ø±Ù…Ø² Ø¬Ø¯ÛŒØ¯ (Ø­Ø¯Ø§Ù‚Ù„ 8 Ú©Ø§Ø±Ø§Ú©ØªØ±)..."
                                    class="w-full p-3 rounded-2xl glass-effect theme-text-primary focus:outline-none" />
                                <input type="password" id="repeatPassword" placeholder="ØªÚ©Ø±Ø§Ø± Ø±Ù…Ø²..."
                                    class="w-full p-3 rounded-2xl glass-effect theme-text-primary focus:outline-none" />
                                <div id="passwordError" class="text-xs text-red-400"></div>
                                <button id="saveNewPassword"
                                    class="w-full py-2 bg-gradient-to-r from-yellow-400 to-orange-500 text-white rounded-2xl font-semibold hover:scale-105 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed"
                                    disabled>
                                    Ø°Ø®ÛŒØ±Ù‡ Ø±Ù…Ø² Ø¬Ø¯ÛŒØ¯
                                </button>
                                <button id="forgotPasswordBtn"
                                    class="text-sm text-blue-400 underline hover:text-blue-300 transition">Ø±Ù…Ø²Ù… Ø±Ùˆ
                                    ÙØ±Ø§Ù…ÙˆØ´ Ú©Ø±Ø¯Ù…</button>
                            </div>
                        </div>
                        <!-- Memory Settings -->
                        <div id="memorySettings" class="space-y-6 hidden">
                            <!-- Title -->
                            <div class="text-center mb-6">
                                <h3 class="text-2xl font-bold gradient-text">ğŸ§  ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø­Ø§ÙØ¸Ù‡ Elma</h3>
                                <p class="theme-text-secondary text-sm">ØªÙ…Ø§Ù… Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø²ÛŒØ± Ø¯Ø± Ù…Ø±ÙˆØ±Ú¯Ø± Ø´Ù…Ø§ Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒØ´Ù†
                                    (LocalStorage)</p>
                            </div>
                            <!-- Name -->
                            <div class="glass-effect rounded-2xl p-4">
                                <label for="realName" class="block font-medium theme-text-primary mb-2">Ø§Ø³Ù…
                                    ÙˆØ§Ù‚Ø¹ÛŒ</label>
                                <input id="realName" type="text" placeholder="Ù…Ø«Ù„Ø§Ù‹ Ø§Ù…ÛŒØ±ØŒ Ø³Ø§Ø±Ø§ØŒ ÛŒØ§ GHOST ğŸ˜"
                                    class="w-full p-3 rounded-2xl glass-effect theme-text-primary focus:outline-none focus:glow-effect transition-all duration-300" />
                            </div>
                            <!-- Nickname -->
                            <div class="glass-effect rounded-2xl p-4">
                                <label for="nickname" class="block font-medium theme-text-primary mb-2">Ù„Ù‚Ø¨ Ù…ÙˆØ±Ø¯
                                    Ø¹Ù„Ø§Ù‚Ù‡
                                    ğŸ’•</label>
                                <input id="nickname" type="text" placeholder="Ù…Ø«Ù„Ø§Ù‹ Ø¹Ø´Ù‚Ù…ØŒ Ø±ÙÛŒÙ‚ØŒ Ø®ÙˆØ´Ú¯Ù„Ù… ğŸ˜"
                                    class="w-full p-3 rounded-2xl glass-effect theme-text-primary focus:outline-none focus:glow-effect transition-all duration-300" />
                            </div>
                            <!-- Interests -->
                            <div class="glass-effect rounded-2xl p-4">
                                <label for="interests" class="block font-medium theme-text-primary mb-2">Ø¹Ù„Ø§ÛŒÙ‚
                                    ğŸ®ğŸ§ğŸ’»</label>
                                <textarea id="interests" rows="2"
                                    placeholder="Ù…Ø«Ù„Ø§Ù‹ Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒÙ†ÙˆÛŒØ³ÛŒØŒ Ù…ÙˆØ³ÛŒÙ‚ÛŒØŒ ÙÛŒÙ„Ù…ØŒ ÙÙˆØªØ¨Ø§Ù„ âš½"
                                    class="w-full p-3 rounded-2xl glass-effect theme-text-primary focus:outline-none focus:glow-effect transition-all duration-300 resize-none"></textarea>
                            </div>
                            <!-- Mood -->
                            <div class="glass-effect rounded-2xl p-4">
                                <label for="mood" class="block font-medium theme-text-primary mb-2">Ù…ÙˆØ¯ ÙØ¹Ù„ÛŒ
                                    ğŸ˜</label>
                                <select id="mood"
                                    class="w-full p-3 rounded-2xl glass-effect theme-text-primary focus:outline-none focus:glow-effect transition-all duration-300">
                                    <option value="happy">Ø´Ø§Ø¯ ğŸ˜Š</option>
                                    <option value="sad">ØºÙ…Ú¯ÛŒÙ† ğŸ˜¢</option>
                                    <option value="tired">Ø®Ø³ØªÙ‡ ğŸ˜´</option>
                                    <option value="angry">Ø¹ØµØ¨ÛŒ ğŸ˜¡</option>
                                    <option value="romantic">Ø¹Ø§Ø´Ù‚ ğŸ’–</option>
                                </select>
                            </div>
                            <!-- Affinity -->
                            <div class="glass-effect rounded-2xl p-4">
                                <label for="affinity" class="block font-medium theme-text-primary mb-2">Ø³Ø·Ø­ ØµÙ…ÛŒÙ…ÛŒØª
                                    ğŸ’</label>
                                <input id="affinity" type="range" min="0" max="100" value="50"
                                    class="w-full accent-pink-500">
                                <div class="text-center theme-text-secondary text-sm mt-1">ÛµÛ°Ùª</div>
                            </div>
                            <!-- Last Interaction -->
                            <div class="glass-effect rounded-2xl p-4">
                                <label class="block font-medium theme-text-primary mb-2">Ø¢Ø®Ø±ÛŒÙ† ØªØ¹Ø§Ù…Ù„ ğŸ“…</label>
                                <div id="lastInteraction"
                                    class="w-full p-3 rounded-2xl glass-effect theme-text-secondary text-sm border border-pink-300/30">
                                    Ù‡Ù†ÙˆØ² ØªØ¹Ø§Ù…Ù„ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡
                                </div>
                            </div>
                            <!-- Management Buttons -->
                            <div class="flex flex-wrap gap-3 justify-center mt-6">
                                <button id="saveMemoryBtn"
                                    class="flex-1 py-3 bg-gradient-to-r from-pink-500 to-fuchsia-600 text-white rounded-2xl hover-lift transition-all duration-300 font-medium">
                                    ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡ Ø­Ø§ÙØ¸Ù‡
                                </button>
                                <button id="viewMemoryBtn"
                                    class="flex-1 py-3 glass-effect theme-text-primary rounded-2xl hover-lift transition-all duration-300 font-medium">
                                    ğŸ§  Ù†Ù…Ø§ÛŒØ´ Ø­Ø§ÙØ¸Ù‡
                                </button>
                                <button id="clearMemoryBtn"
                                    class="flex-1 py-3 bg-red-500 hover:bg-red-600 text-white rounded-2xl hover-lift transition-all duration-300 font-medium">
                                    ğŸ”„ Ù¾Ø§Ú©â€ŒØ³Ø§Ø²ÛŒ Ø­Ø§ÙØ¸Ù‡
                                </button>
                            </div>
                            <div class="flex flex-wrap gap-3 justify-center">
                                <button id="exportMemoryBtn"
                                    class="flex-1 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-2xl hover-lift transition-all duration-300 font-medium">
                                    ğŸ“¤ Ø®Ø±ÙˆØ¬ÛŒ JSON
                                </button>
                                <button id="importMemoryBtn"
                                    class="flex-1 py-3 bg-green-500 hover:bg-green-600 text-white rounded-2xl hover-lift transition-all duration-300 font-medium">
                                    ğŸ“¥ ÙˆØ±ÙˆØ¯ JSON
                                </button>
                                <input type="file" id="importFileInput" accept=".json" class="hidden" />
                            </div>
                            <!-- Memory Display Modal -->
                            <div id="memoryViewModal"
                                class="fixed inset-0 bg-black/60 backdrop-blur-sm hidden z-[999] flex items-center justify-center">
                                <div
                                    class="glass-effect rounded-3xl max-w-lg w-full mx-4 p-8 text-center bounce-in shadow-2xl border border-pink-400/30">
                                    <h3 class="text-xl font-bold gradient-text mb-4">ğŸ§  Ø­Ø§ÙØ¸Ù‡ Ø°Ø®ÛŒØ±Ù‡â€ŒØ´Ø¯Ù‡</h3>
                                    <pre id="memoryViewContent"
                                        class="text-left theme-text-secondary bg-black/10 p-4 rounded-2xl max-h-[300px] overflow-y-auto text-sm"></pre>
                                    <button id="closeMemoryView"
                                        class="mt-4 w-full py-3 theme-accent text-white rounded-2xl hover-lift transition-all duration-300 font-medium">
                                        Ø¨Ø³ØªÙ†
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div id="themeSettings" class="space-y-6 hidden">
                            <div id="themeContentLoader" class="text-center py-6 theme-text-secondary">
                                Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ØªÙ†Ø¸ÛŒÙ…Ø§Øª ØªÙ…...
                            </div>
                        </div>
                        <!-- Delete All Chats Confirmation Modal -->
                        <div id="deleteAllChatsModal"
                            class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
                            <div class="glass-effect rounded-3xl w-full max-w-md bounce-in">
                                <div class="p-8">
                                    <div class="text-center mb-6">
                                        <div
                                            class="w-16 h-16 mx-auto mb-4 rounded-full bg-red-500 flex items-center justify-center">
                                            <i class="fas fa-exclamation-triangle text-white text-2xl"></i>
                                        </div>
                                        <h3 class="text-2xl font-bold text-red-500 mb-2">Ø­Ø°Ù ØªÙ…Ø§Ù… Ú†Øªâ€ŒÙ‡Ø§ âš ï¸</h3>
                                        <p class="theme-text-secondary">Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù†ÛŒ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§ÛŒ ØªÙ…Ø§Ù… Ú†Øªâ€ŒÙ‡Ø§Øª Ø±Ùˆ Ø­Ø°Ù
                                            Ú©Ù†ÛŒØŸ
                                        </p>
                                        <p class="theme-text-secondary text-sm mt-2">Ø§ÛŒÙ† Ø¹Ù…Ù„ Ù‚Ø§Ø¨Ù„ Ø¨Ø§Ø²Ú¯Ø´Øª Ù†ÛŒØ³Øª!</p>
                                    </div>
                                    <div class="flex gap-3">
                                        <button id="confirmDeleteAllChats"
                                            class="flex-1 py-3 bg-red-500 hover:bg-red-600 text-white rounded-2xl hover-lift transition-all duration-300 font-medium">
                                            Ø¨Ù„Ù‡ØŒ Ù‡Ù…Ù‡ Ø±Ùˆ Ø­Ø°Ù Ú©Ù†
                                        </button>
                                        <button id="cancelDeleteAllChats"
                                            class="flex-1 py-3 glass-effect theme-text-primary rounded-2xl hover-lift transition-all duration-300 font-medium">
                                            Ù„ØºÙˆ
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Delete Account Confirmation Modal -->
                        <div id="deleteAccountModal"
                            class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
                            <div class="glass-effect rounded-3xl w-full max-w-md bounce-in">
                                <div class="p-8">
                                    <div class="text-center mb-6">
                                        <div
                                            class="w-16 h-16 mx-auto mb-4 rounded-full bg-red-500 flex items-center justify-center">
                                            <i class="fas fa-user-times text-white text-2xl"></i>
                                        </div>
                                        <h3 class="text-2xl font-bold text-red-500 mb-2">Ø­Ø°Ù Ø§Ú©Ø§Ù†Øª ğŸ’”</h3>
                                        <p class="theme-text-secondary">Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù†ÛŒ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§ÛŒ Ø§Ú©Ø§Ù†ØªØª Ø±Ùˆ Ø­Ø°Ù Ú©Ù†ÛŒØŸ</p>
                                        <p class="theme-text-secondary text-sm mt-2">ØªÙ…Ø§Ù… Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ùˆ Ú†Øªâ€ŒÙ‡Ø§Øª Ø¨Ø±Ø§ÛŒ
                                            Ù‡Ù…ÛŒØ´Ù‡
                                            Ù¾Ø§Ú©
                                            Ù…ÛŒØ´Ù†!
                                        </p>
                                    </div>
                                    <div class="flex gap-3">
                                        <button id="confirmDeleteAccount"
                                            class="flex-1 py-3 bg-red-500 hover:bg-red-600 text-white rounded-2xl hover-lift transition-all duration-300 font-medium">
                                            Ø¨Ù„Ù‡ØŒ Ø­Ø°Ù Ú©Ù†
                                        </button>
                                        <button id="cancelDeleteAccount"
                                            class="flex-1 py-3 glass-effect theme-text-primary rounded-2xl hover-lift transition-all duration-300 font-medium">
                                            Ù„ØºÙˆ
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="gameImage"></div>
                        <!-- Chat Limit Modal -->
                        <div id="chatLimitModal"
                            class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
                            <div class="glass-effect rounded-3xl w-full max-w-md p-8 text-center theme-bg-secondary">
                                <div class="mb-4 text-red-500 text-2xl">â—ï¸</div>
                                <h3 class="text-xl font-bold mb-4 theme-text-primary">
                                    Ø³Ù‚Ù Ú†Øª Ø±Ø§ÛŒÚ¯Ø§Ù† ØªÙ…ÙˆÙ… Ø´Ø¯ ğŸ˜¢
                                </h3>
                                <p class="theme-text-secondary mb-6">
                                    Ø¨Ø±Ø§ÛŒ Ø§Ø¯Ø§Ù…Ù‡ Ø¨Ø§ÛŒØ¯ Ù¾Ø±Ùˆ Ø¨Ø®Ø±ÛŒ ğŸ‘‘
                                </p>
                                <!-- Ø¯Ú©Ù…Ù‡ Ø®Ø±ÛŒØ¯ -->
                                <button id="chatLimitBuyBtn" class="w-full py-3 bg-gradient-to-r from-yellow-400 to-orange-500
        text-white rounded-2xl hover-lift glow-effect transition-all duration-300 font-medium">
                                    Ø®Ø±ÛŒØ¯ Ù¾Ø±Ùˆ ğŸ‘‘
                                </button>
                                <!-- Ø¯Ú©Ù…Ù‡ Ø¨Ø³ØªÙ† -->
                                <button id="chatLimitClose"
                                    class="w-full mt-4 py-2 glass-effect theme-text-primary rounded-2xl hover-lift">
                                    Ø¨Ø³ØªÙ†
                                </button>
                            </div>
                        </div>
                        <div id="tipsModal"
                            class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
                            <div class="glass-effect w-full max-w-md rounded-3xl p-6 text-center space-y-4">
                                <h2 class="text-2xl font-bold gradient-text mb-2">ğŸ‘‹ Ø¨Ù‡ Elma Ø®ÙˆØ´ Ø§ÙˆÙ…Ø¯ÛŒ!</h2>
                                <ul class="text-right space-y-3 theme-text-primary">
                                    <li>ğŸ’¡ <b>Ù†Ú©ØªÙ‡ Û±:</b> Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒ Ø¨Ø§ Ù…Ù† Ù‡Ø± Ø²Ù…Ø§Ù† Ú†Øª Ú©Ù†ÛŒ Ùˆ Ù¾ÛŒØ§Ù… Ø¹Ø§Ø´Ù‚Ø§Ù†Ù‡ Ø¨ÙØ±Ø³ØªÛŒ.</li>
                                    <li>ğŸ“¸ <b>Ù†Ú©ØªÙ‡ Û²:</b> Ø¹Ú©Ø³â€ŒÙ‡Ø§ÛŒ Ú¯Ø§Ù„Ø±ÛŒ ÙÙ‚Ø· Ø¨Ø§ Ø§Ú©Ø§Ù†Øª Ù¾Ø±Ùˆ Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯ Ù…ÛŒØ´Ù‡.</li>
                                    <li>ğŸ”” <b>Ù†Ú©ØªÙ‡ Û³:</b> Ø¨Ø±Ø§ÛŒ Ø¬ÙˆØ§Ø¨ Ø³Ø±ÛŒØ¹â€ŒØªØ± Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒ Ø§Ø² Ù…Ù†ÙˆÛŒ Ø¨Ø§Ù„Ø§ Â«Ú†Øª Ø¬Ø¯ÛŒØ¯Â» Ø¨Ø³Ø§Ø²ÛŒ.
                                    </li>
                                </ul>
                                <button id="closeTips"
                                    class="w-full mt-6 py-3 theme-accent text-white rounded-2xl hover-lift transition-all duration-300 font-medium">
                                    Ù…ØªÙˆØ¬Ù‡ Ø´Ø¯Ù… â¤ï¸
                                </button>
                            </div>
                        </div>
                        <!-- Hidden file input for images -->
                        <input type="file" id="fileInput" accept="image/*" class="hidden">
                        <audio id="welcomeAudio" src="Assets/voice/Elma.wav" preload="auto"></audio>
                        <script src="https://unpkg.com/lucide@latest"></script>
                        <script type="module" src="script.js"></script>
                        <script>(function () { function c() { var b = a.contentDocument || a.contentWindow.document; if (b) { var d = b.createElement('script'); d.innerHTML = "window.__CF$cv$params={r:'98231e777770da45',t:'MTc1ODM5MDE0Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='';document.getElementsByTagName('head')[0].appendChild(a);"; b.getElementsByTagName('head')[0].appendChild(d) } } if (document.body) { var a = document.createElement('iframe'); a.height = 1; a.width = 1; a.style.position = 'absolute'; a.style.top = 0; a.style.left = 0; a.style.border = 'none'; a.style.visibility = 'hidden'; document.body.appendChild(a); if ('loading' !== document.readyState) c(); else if (window.addEventListener) document.addEventListener('DOMContentLoaded', c); else { var e = document.onreadystatechange || function () { }; document.onreadystatechange = function (b) { e(b); 'loading' !== document.readyState && (document.onreadystatechange = e, c()) } } } })();</script>
</body>
</html>
